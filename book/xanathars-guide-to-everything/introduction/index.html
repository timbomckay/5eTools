<!doctype html><html lang=en-us style=background-image:url(/5eTools/lightpaperfibers.png)><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Introduction Â· The Handy Haversack</title>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=HandheldFriendly content="True">
<link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ““</text></svg>">
<script src=/5eTools/index.min.66bdb787d8c2b9704251c9873a01d70579626549e9c71c31b703a68f697beeb0.js defer></script>
<link rel=stylesheet href="/5eTools/index.min.c9d5cbc26ca74c023ead23b8a8c53c65d351d88edd30fc950ba0e75286335110.css" media=all>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap" rel=stylesheet>
<link href="https://fonts.googleapis.com/css2?family=PT+Serif&family=UnifrakturMaguntia&display=swap" rel=stylesheet>
<body class="flex flex-col min-h-screen"><a href=#skip-nav class="fixed bg-primary-500 focus:text-white leading-none m-2 not-focus:sr-only px-3 py-2 text-xs z-50">Skip Navigation</a>
<header class="bg-white print:absolute px-4 border-b-2 sticky top-0 z-40">
<div class="flex items-center justify-between max-w-screen-md mx-auto">
<div>
<a href=https://timbomckay.github.io/5eTools/ class="block py-2 px-4">The Handy Haversack</a>
</div>
</div>
</header>
<div id=skip-nav tabindex=-1 class=sr-only></div>
<main class="lg:pb-10 mx-auto px-4 lg:px-6 mb-6 lg:mb-8">
<h1 class="mb-6 px-6">Introduction</h1>
<div class="gap-8 lg:grid items-start" style="grid-template-columns:auto 10rem">
<article class="max-w-ch mx-auto px-6"><p>Beneath the bustling City of Waterdeep, a beholder crime lord keeps tabs on everyone and everythingâ€”or so the beholder thinks. Known as Xanathar, this bizarre being believes it can gather information on everything in the Dungeons & Dragons multiverse. The beholder desires to know it all! But no matter what the beholder learns and what treasures it acquires, its most prized possession in all the multiverse remains its goldfish, Sylgar.</p>
<p>The first major rules expansion to the fifth edition of D&D, <em>Xanathar&rsquo;s Guide to Everything</em> provides a wealth of new options for the game. Xanathar might not be able to realize its dream to know everything, but this book does delve into every major part of the game: adventurers, their adventures, and the magic they wield.</p>
<h2 id=using-this-book>
<a href=#using-this-book class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Using this Book</h2><p>Written for both players and Dungeon Masters, this book offers options to enhance campaigns in any world, whether you&rsquo;re adventuring in the Forgotten Realms, another official D&D setting, or a world of your own creation. The options here build on the official rules contained within the player&rsquo;s handbook, the monster manual, and the dungeon master&rsquo;s guide. Think of this book as the companion to those volumes. It builds on their foundation, exploring pathways first laid in those publications. Nothing herein is required for a D&D campaignâ€”this is not a fourth core rulebookâ€”but we hope it will provide you new ways to enjoy the game.</p>
<p>Chapter 1 offers character options that expand on those offered in the player&rsquo;s handbook. Chapter 2 is a toolkit for the DM that provides new resources for running the game and designing adventures, all of it building on the Monster Manual and the Dungeon Master&rsquo;s Guide. Chapter 3 presents new spells for player characters and spellcasting monsters to unleash.</p>
<p>Appendix A provides guidance on running a shared campaign, similar to the activities staged by the D&D Adventurers League, and appendix B contains a host of tables that allow you to quickly generate names for the characters in your D&D stories.</p>
<p>As you peruse the many options herein, you&rsquo;ll come across observations from Xanathar itself. Like the beholder&rsquo;s roving mind, your reading will take you to places in the game familiar and new. May you enjoy the journey!</p>
<blockquote>
<h3 id=unearthed-arcana>
<a href=#unearthed-arcana class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Unearthed Arcana</h3><p>Much of the material in this book originally appeared in Unearthed Arcana, a series of online articles we publish to explore rules that might officially become part of the game. Some Unearthed Arcana offerings don&rsquo;t end up resonating with fans and are set aside for the time being. The Unearthed Arcana material that inspired the options in the following chapters was well received and, thanks to feedback from thousands of you, has been refined into the official forms presented here.</p>
</blockquote>
<h2 id=the-core-rules>
<a href=#the-core-rules class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>The Core Rules</h2><p>This book relies on the rules in the three core rulebooks. The game especially makes frequent use of the rules in chapters 7-10 of the player&rsquo;s handbook: &ldquo;Using Ability Scores,&rdquo; &ldquo;Adventuring,&rdquo; &ldquo;Combat,&rdquo; and &ldquo;Spellcasting.&rdquo; That book&rsquo;s appendix A is also crucial; it contains definitions of conditions, like <wc-fetch type=condition>invisible</wc-fetch> and <wc-fetch type=condition>prone</wc-fetch>. You don&rsquo;t need to know the rules by heart, but it&rsquo;s helpful to know where to find them when you need them.</p>
<p>If you&rsquo;re a DM, you should also know where to look things up in the dungeon master&rsquo;s guide, especially the rules on how magic items work (see chapter 7 of that book). The introduction of the monster manual is your guide on how to use a monster&rsquo;s stat block.</p>
<h3 id=the-dm-adjudicates-the-rules>
<a href=#the-dm-adjudicates-the-rules class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>The DM Adjudicates the Rules</h3><p>One rule overrides all others: the DM is the final authority on how the rules work in play.</p>
<p>Rules are part of what makes D&D a game, rather than just improvised storytelling. The game&rsquo;s rules are meant to help organize, and even inspire, the action of a D&D campaign. The rules are a tool, and we want our tools to be as effective as possible. No matter how good those tools might be, they need a group of players to bring them to life and a DM to guide their use.</p>
<p>The DM is key. Many unexpected events can occur in a D&D campaign, and no set of rules could reasonably account for every contingency. If the rules tried to do so, the game would become a slog. An alternative would be for the rules to severely limit what characters can do, which would be contrary to the open-endedness of D&D. Here&rsquo;s the path the game takes: it lays a foundation of rules that a DM can build on, and it embraces the DM&rsquo;s role as the bridge between the things the rules address and the things they don&rsquo;t.</p>
<h3 id=ten-rules-to-remember>
<a href=#ten-rules-to-remember class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Ten Rules to Remember</h3><p>A few rules in the core rulebooks sometimes trip up a new player or DM. Here are ten of those rules. Keeping them in mind will help you interpret the options in this book.</p>
<h4 id=exceptions-supersede-general-rules>
<a href=#exceptions-supersede-general-rules class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Exceptions Supersede General Rules</h4><p>General rules govern each part of the game. For example, the combat rules tell you that melee weapon attacks use Strength and ranged weapon attacks use Dexterity. That&rsquo;s a general rule, and a general rule is in effect as long as something in the game doesn&rsquo;t explicitly say otherwise.</p>
<p>The game also includes elements-class features, spells, magic items, monster abilities, and the like-that sometimes contradict a general rule. When an exception and a general rule disagree, the exception wins. For example, if a feature says you can make melee weapon attacks using your Charisma, you can do so, even though that statement disagrees with the general rule.</p>
<h4 id=round-down>
<a href=#round-down class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Round Down</h4><p>Whenever you divide or multiply a number in the game, round down if you end up with a fraction, even if the fraction is one-half or greater.</p>
<h4 id=advantage-and-disadvantage>
<a href=#advantage-and-disadvantage class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Advantage and Disadvantage</h4><p>Even if more than one factor gives you advantage or disadvantage on a roll, you have it only once, and if you have advantage and disadvantage on the same roll, they cancel each other.</p>
<h4 id=combining-different-effects>
<a href=#combining-different-effects class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Combining Different Effects</h4><p>Different game effects can affect a target at the same time. For example, two different benefits can give you a bonus to your Armor Class. But when two or more effects have the same proper name, only one of them (the most powerful one if their benefits aren&rsquo;t identical) applies while the durations of the effects overlap. For example, if bless is cast on you when you&rsquo;re still under the effect of an earlier bless, you gain the benefit of only one casting. Similarly, if you&rsquo;re in the radius of more than one Aura of Protection, you benefit only from the one that grants the highest bonus.</p>
<h4 id=reaction-timing>
<a href=#reaction-timing class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Reaction Timing</h4><p>Certain game features let you take a special action, called a reaction, in response to some event. Making opportunity attacks and casting the shield spell are two typical uses of reactions. If you&rsquo;re unsure when a reaction occurs in relation to its trigger, here&rsquo;s the rule: the reaction happens after its trigger completes, unless the description of the reaction explicitly says otherwise.</p>
<p>Once you take a reaction, you can&rsquo;t take another one until the start of your next turn.</p>
<h4 id=resistance-and-vulnerability>
<a href=#resistance-and-vulnerability class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Resistance and Vulnerability</h4><p>Here&rsquo;s the order that you apply modifiers to damage: (1) any relevant damage immunity, (2) any addition or subtraction to the damage, (3) one relevant damage resistance, and (4) one relevant damage vulnerability.</p>
<p>Even if multiple sources give you resistance to a type of damage you&rsquo;re taking, you can apply resistance to it only once. The same is true of vulnerability.</p>
<h4 id=proficiency-bonus>
<a href=#proficiency-bonus class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Proficiency Bonus</h4><p>If your proficiency bonus applies to a roll, you can add the bonus only once to the roll, even if multiple things in the game say your bonus applies. Moreover, if more than one thing tells you to double or halve your bonus, you double it only once or halve it only once before applying it. Whether multiplied, divided, or left at its normal value, the bonus can be used only once per roll.</p>
<h4 id=bonus-action-spells>
<a href=#bonus-action-spells class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Bonus Action Spells</h4><p>If you want to cast a spell that has a casting time of 1 bonus action, remember that you can&rsquo;t cast any other spells before or after it on the same turn, except for cantrips with a casting time of 1 action.</p>
<h4 id=concentration>
<a href=#concentration class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Concentration</h4><p>As soon as you start casting a spell or using a special ability that requires concentration, your concentration on another effect ends instantly.</p>
<h4 id=temporary-hit-points>
<a href=#temporary-hit-points class="header-link icon text-gray-300" aria-label=(anchor)><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>Temporary Hit Points</h4><p>Temporary hit points aren&rsquo;t cumulative. If you have temporary hit points and receive more of them, you don&rsquo;t add them together, unless a game feature says you can. Instead, you decide which temporary hit points to keep.</p>
</article>
<aside class="sticky top-16 text-xs font-sans">
<details class=relative>
<summary class=mb-1>Introduction</summary>
<nav class="absolute bg-white overflow-x-scroll rounded shadow border-gray-200 border-2 max-h-56">
<a href=/5eTools/book/xanathars-guide-to-everything/introduction/ class="block px-2 py-1">Introduction</a>
<a href=/5eTools/book/xanathars-guide-to-everything/character-options/ class="block px-2 py-1 font-normal text-gray-700">Character Options</a>
<a href=/5eTools/book/xanathars-guide-to-everything/dungeon-masters-tools/ class="block px-2 py-1 font-normal text-gray-700">Dungeon Master's Tools</a>
<a href=/5eTools/book/xanathars-guide-to-everything/spells/ class="block px-2 py-1 font-normal text-gray-700">Spells</a>
<a href=/5eTools/book/xanathars-guide-to-everything/shared-campaigns/ class="block px-2 py-1 font-normal text-gray-700">Shared Campaigns</a>
<a href=/5eTools/book/xanathars-guide-to-everything/character-names/ class="block px-2 py-1 font-normal text-gray-700">Character Names</a>
</nav>
</details>
<wc-toc>
<nav id=TableOfContents>
<ul>
<li><a href=#using-this-book>Using this Book</a>
<ul>
<li><a href=#unearthed-arcana>Unearthed Arcana</a></li>
</ul>
</li>
<li><a href=#the-core-rules>The Core Rules</a>
<ul>
<li><a href=#the-dm-adjudicates-the-rules>The DM Adjudicates the Rules</a></li>
<li><a href=#ten-rules-to-remember>Ten Rules to Remember</a></li>
</ul>
</li>
</ul>
</nav>
</wc-toc>
<div class="flex mt-4 gap-1 items-center">
<a href=https://timbomckay.github.io/5eTools/book/players-handbook/introduction/ class="icon text-lg leading-none"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></a>
<a href=#skip-nav class="icon text-xl leading-none"><svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 20 20" height="20" viewBox="0 0 20 20" width="20"><g><rect fill="none" height="20" width="20"/><path d="M10 4c3.31.0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6m0-1c-3.87.0-7 3.13-7 7s3.13 7 7 7 7-3.13 7-7c0-3.87-3.13-7-7-7zm-.5 7v3h1v-3H13l-3-3-3 3H9.5z"/></g></svg></a>
<a href=https://timbomckay.github.io/5eTools/adventure/krenkos-way/krenkos-way/ class="icon text-lg leading-none"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg></a>
</div>
</aside>
</div>
<script>window.customElements.define('wc-toc',class extends HTMLElement{connectedCallback(){const{headings:a}=this,b=this,c=window.visualViewport.height/4;document.addEventListener('scroll',function(f){const d=a.filter(a=>a.target.offsetTop<window.scrollY+c).pop(),e=b.getElementsByClassName('active');if(e!=null)for(let a of e){a.classList.remove('active');const b=a.closest('ul');b.classList.remove('has-active')}if(d!=null){d.el.classList.add('active');const a=d.el.closest('ul');a.classList.add('has-active')}})}get headings(){const a=[];for(let b of this.querySelectorAll('a'))a.push({el:b,target:document.getElementById(b.hash.replace('#',''))});return a}})</script>
</main>
<footer></footer></body>
</html>